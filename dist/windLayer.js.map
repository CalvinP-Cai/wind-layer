{"version":3,"file":"windLayer.js","sources":["../src/polyfill/assign.js","../src/helper/index.js","../src/polyfill/requestAnimFrame.js","../src/index.js"],"sourcesContent":["if (typeof Object.assign !== 'function') {\r\n  // Must be writable: true, enumerable: false, configurable: true\r\n  Object.defineProperty(Object, 'assign', {\r\n    value: function assign (target, varArgs) { // .length of function is 2\r\n      'use strict';\r\n      if (target == null) { // TypeError if undefined or null\r\n        throw new TypeError('Cannot convert undefined or null to object');\r\n      }\r\n      var to = Object(target);\r\n      for (var index = 1; index < arguments.length; index++) {\r\n        var nextSource = arguments[index];\r\n        if (nextSource != null) { // Skip over if undefined or null\r\n          for (var nextKey in nextSource) {\r\n            // Avoid bugs when hasOwnProperty is shadowed\r\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n              to[nextKey] = nextSource[nextKey];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return to;\r\n    },\r\n    writable: true,\r\n    configurable: true\r\n  });\r\n}\r\n","/**\n * @returns {Number} the value x clamped to the range [low, high].\n */\nconst clamp = function (x, range) {\n  return Math.max(range[0], Math.min(x, range[1]));\n};\n\n/**\n * @returns {Boolean} true if agent is probably a mobile device. Don't really care if this is accurate.\n */\nconst isMobile = function () {\n  return (/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i).test(navigator.userAgent);\n};\n\n/**\n * create canvas\n * @param width\n * @param height\n * @param Canvas\n * @returns {HTMLCanvasElement}\n */\nconst createCanvas = (width, height, Canvas) => {\n  if (typeof document !== 'undefined') {\n    const canvas = document.createElement('canvas')\n    canvas.width = width\n    canvas.height = height\n    return canvas\n  } else {\n    // create a new canvas instance in node.js\n    // the canvas class needs to have a default constructor without any parameter\n    return new Canvas(width, height)\n  }\n};\n\n/**\n * bind\n * @param fn\n * @param context\n * @returns {Function}\n */\nconst bind = function (fn, context) {\n  const args = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null;\n  return function () {\n    return fn.apply(context, args || arguments);\n  };\n};\n\nexport {\n  bind,\n  clamp,\n  isMobile,\n  createCanvas\n}\n","import { bind } from '../helper'\n\nwindow.requestAnimFrame = function (fn, immediate, context, element) {\n  const f = bind(fn, context);\n  const request = (window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function (callback) {\n      window.setTimeout(callback, 1000 / 60);\n    });\n  if (request) {\n    return request.call(window, f, element);\n  } else {\n    if (immediate) {\n      f();\n    } else {\n      return window.setTimeout(f, 16);\n    }\n  }\n};\n\nconst getCancelAnimFrame = function () {\n  const prefixs = ['webkit', 'moz', 'o', 'ms'];\n  let func = window.cancelAnimationFrame;\n  for (let i = 0, len = prefixs.length; i < len && !func; i++) {\n    func = window[prefixs[i] + 'CancelAnimationFrame'] || window[prefixs[i] + 'CancelRequestAnimationFrame'];\n  }\n  return func;\n};\n\nwindow.cancelAnimFrame = function (id) {\n  const cancel = getCancelAnimFrame();\n  if (cancel) {\n    cancel.call(window, id);\n  } else {\n    window.clearTimeout(id);\n  }\n};\n","import './polyfill/assign';\nimport './polyfill/requestAnimFrame';\nimport ol from 'openlayers';\nimport { isMobile, createCanvas } from './helper';\n\nconst _options = {\n  gridPixels: 4, // 用于插值的网格像素边长\n  gridMaxDivs: 200, // 最大网格边划分数量\n  gridReduceFactor: 2, // 在移动设备上适当减少网格数量的比例\n  fieldFactor: 0.8,\n  fieldMaxIntensity: 50, // 可视化时限制的流体场最大强度，比如风速最大值\n  maxParticleAge: 100,\n  particleCountFactor: 0.05,\n  lineWidth: 1.2,\n  opacity: 1.0,\n  colors: ['#fff', '#fff', '#fff', '#fff', '#fff'],\n  searchSteps: 3, // 插值检索的尝试次数\n  interpolateCount: 4, // 插值使用的数据数量\n  frameRate: 15\n};\n\nconst NULL_WIND_VECTOR = [NaN, NaN, null];\n\nclass WindyLayer extends ol.layer.Image {\n  constructor (data, options = {}) {\n    super(options);\n\n    this._options = Object.assign({}, _options, options);\n\n    /**\n     * 矢量图层\n     * @type {null}\n     */\n    this._canvas = null;\n\n    /**\n     * windy 数据\n     */\n    this.data = [];\n    if (data) {\n      this.setData(data)\n    }\n\n    /**\n     * columns\n     * @type {Array}\n     * @private\n     */\n    this._grid = [];\n    this._dirty = true;\n\n    /**\n     * color\n     * @type {Array}\n     * @private\n     */\n    this._batches = [];\n\n    /**\n     * is playing\n     * @type {boolean}\n     * @private\n     */\n    this._playing = false;\n\n    /**\n     * animate\n     * @type {null}\n     * @private\n     */\n    this._animationLoop = null;\n\n    /**\n     * is clear\n     * @type {boolean}\n     */\n    this.isClear = false;\n    this.setSource(new ol.source.ImageCanvas({\n      logo: options.logo,\n      state: options.state,\n      attributions: options.attributions,\n      resolutions: options.resolutions,\n      canvasFunction: this.canvasFunction.bind(this),\n      projection: (options.hasOwnProperty('projection') ? options.projection : 'EPSG:3857'),\n      ratio: (options.hasOwnProperty('ratio') ? options.ratio : 1)\n    }));\n    this.on('precompose', this.redraw, this);\n  }\n\n  /**\n   * get layer data\n   * @returns {*}\n   */\n  getData () {\n    return this.data;\n  }\n\n  /**\n   * set layer data\n   * @param data\n   * @returns {WindyLayer}\n   */\n  setData (data) {\n    const _map = this.getMap();\n    if (!_map) return this;\n    let [us, vs] = [data[0], data[1]];\n    let [cols, rows] = [us.header.nx, us.header.ny];\n    const _projection = this.get('projection')\n    for (let j = 0; j < rows; j++) {\n      const lat = 90 - 180 * j / rows;\n      if (Math.abs(lat) > 85.1) {\n        continue;\n      }\n      for (let i = 0; i < cols; i++) {\n        const lon = -180 + 360 * i / cols;\n        const point = ol.proj.transform([lon, lat], _projection, 'EPSG:3857');\n        const idx = cols * j + i;\n        const u = us.data[idx];\n        const v = vs.data[idx];\n        this.addDataPoint(point[0], point[1], u, v);\n      }\n    }\n    return this\n  }\n\n  /**\n   * add point\n   * @param x\n   * @param y\n   * @param uid\n   * @param value\n   * @param feature\n   */\n  addDataPoint (x, y, uid, value, feature) {\n    uid = uid || 0;\n    value = value || 0;\n    const extent = [x, y, x, y];\n    const data = {\n      x: x,\n      y: y,\n      u: uid,\n      v: value,\n      bbox: extent\n    };\n    this.data.push(data);\n  }\n\n  /**\n   * render windy layer\n   * @returns {WindyLayer}\n   */\n  render (canvas) {\n    const extent = this._getExtent();\n    if (this.isClear || !this.getData() || !extent) return this\n    if (!this.getData()) return this\n    if (canvas && !this._playing) {\n      this.start()\n    } else if (canvas && this._playing) {\n    }\n    return this\n  }\n\n  /**\n   * re-draw\n   */\n  redraw () {\n    if (this.isClear) return;\n    const _extent = this._options.extent || this._getExtent();\n    this.setExtent(_extent)\n  }\n\n  /**\n   * build grid\n   */\n  buildGrid () {\n    const map = this.getMap();\n    if (!map || !this._dirty) {\n      return;\n    }\n    const _size = map.getSize();\n    const _extent = this._options.extent || this._getExtent();\n    const dim = Math.max(_size[0], _size[1]);\n    let gridDivs = Math.min(dim / this._options.gridPixels, this._options.gridMaxDivs);\n    if (isMobile()) {\n      gridDivs /= this._options.gridReduceFactor;\n    }\n    const gridSize = this._gridSize = Math.max(_extent[2] - _extent[0], _extent[3] - _extent[1]) / gridDivs;\n    const count = this.data && this.data.length;\n    const divCount = Math.sqrt(count) || 1;\n    const expand = Math.max((_extent[2] - _extent[0]), (_extent[3] - _extent[1])) / divCount;\n    // 构建格网\n    this._gridColCount = Math.ceil((_extent[2] - _extent[0]) / gridSize);\n    this._gridRowCount = Math.ceil((_extent[3] - _extent[1]) / gridSize);\n    const grid = [];\n    for (let j = 0; j < this._gridRowCount + 1; j++) {\n      let y = _extent[1] + j * gridSize;\n      if (y >= _extent[1] && y <= _extent[3]) {\n        const row = [];\n        for (let i = 0; i < this._gridColCount + 1; i++) {\n          let x = _extent[0] + i * gridSize;\n          row[i] = this._interpolate(x, y, [x - expand, y - expand, x + expand, y + expand]);\n          let _count = 1;\n          while (row[i][2] === null && _count <= this._options.searchSteps) {\n            _count *= 2;\n            let _expand = _count * expand;\n            row[i] = this._interpolate(x, y, [x - _expand, y - _expand, x + _expand, y + _expand]);\n          }\n        }\n        grid[j] = row;\n      }\n    }\n    this._grid = grid;\n    this._dirty = false;\n  }\n\n  /**\n   * canvas constructor\n   * @param extent\n   * @param resolution\n   * @param pixelRatio\n   * @param size\n   * @param projection\n   * @returns {*}\n   */\n  canvasFunction (extent, resolution, pixelRatio, size, projection) {\n    if (!this._canvas) {\n      this._canvas = createCanvas(size[0], size[1])\n    } else {\n      this._canvas.width = size[0]\n      this._canvas.height = size[1]\n    }\n    if (resolution <= this.get('maxResolution')) {\n      this.render(this._canvas)\n    } else {\n      // console.warn('超出所设置最大分辨率！')\n    }\n    return this._canvas\n  }\n\n  /**\n   * get context\n   * @returns {*}\n   */\n  getContext () {\n    return this._canvas && this._canvas.getContext('2d');\n  }\n\n  /**\n   * get map current extent\n   * @returns {ol.View|*|Array<number>}\n   * @private\n   */\n  _getExtent () {\n    if (!this.getMap()) return\n    const size = this._getMapSize()\n    const _view = this.getMap().getView()\n    return _view && _view.calculateExtent(size)\n  }\n\n  /**\n   * get size\n   * @returns {ol.Size|*}\n   * @private\n   */\n  _getMapSize () {\n    if (!this.getMap()) return;\n    return this.getMap().getSize();\n  }\n\n  /**\n   * append layer to map\n   * @param map\n   */\n  appendTo (map) {\n    if (map && map instanceof ol.Map) {\n      this.set('originMap', map)\n      map.addLayer(this)\n    } else {\n      throw new Error('not map object')\n    }\n  }\n\n  /**\n   * clearWind method will retain the instance\n   * @private\n   */\n  clearWind () {\n    const _map = this.getMap();\n    if (!_map) return;\n    this.isClear = true;\n    this._cloneLayer = this;\n    _map.removeLayer(this);\n    this.changed();\n    this.getMap().renderSync();\n  }\n\n  /**\n   * remove layer this instance will be destroyed after remove\n   */\n  removeLayer () {\n    const _map = this.getMap();\n    if (!_map) return;\n    this.un('precompose', this.redraw, this);\n    _map.removeLayer(this);\n    delete this._canvas;\n    delete this._cloneLayer;\n  }\n\n  /**\n   * set map\n   * @param map\n   */\n  setMap (map) {\n    this.set('originMap', map)\n    // ol.layer.Image.prototype.setMap.call(this, map)\n  }\n\n  /**\n   * get map\n   */\n  getMap () {\n    return this.get('originMap')\n  }\n\n  /**\n   * start ani\n   * @returns {WindyLayer}\n   */\n  start () {\n    const that = this;\n    this.buildGrid();\n    let then = Date.now();\n    that._playing = true;\n    (function frame () {\n      that._animationLoop = window.requestAnimFrame(frame);\n      const now = Date.now()\n      const delta = now - then;\n      if (delta > 1000 / that._options.frameRate) {\n        then = now - (delta % 1000 / that._options.frameRate);\n        that._evolve();\n        that._draw();\n      }\n    })();\n    return this\n  }\n\n  /**\n   * stop ani\n   * @returns {WindyLayer}\n   */\n  stop () {\n    this._playing = true\n    if (this._animationLoop) window.cancelAnimFrame(this._animationLoop);\n    return this\n  }\n\n  /**\n   * clear layer\n   * @param forbidRedraw\n   * @returns {WindyLayer}\n   */\n  clear (forbidRedraw) {\n    this.particles = null;\n    this._clearContext();\n    this._dirty = true;\n    return this;\n  }\n\n  /**\n   * update layer\n   */\n  update () {\n    this._dirty = true;\n    this._draw();\n  }\n\n  /**\n   * clear context\n   * @private\n   */\n  _clearContext () {\n    const context = this.getContext();\n    context.clearRect(0, 0, this._canvas.width, this._canvas.height);\n  }\n\n  /**\n   * draw line\n   * @private\n   */\n  _draw () {\n    const map = this.getMap();\n    const context = this.getContext();\n    if (this._dirty) {\n      this._clearContext();\n      if (this._playing) {\n        setTimeout(() => {\n          this.buildGrid();\n          this._particles = null;\n        }, 1000 / this._options.frameRate);\n      }\n    }\n    if (this._playing) {\n      if (!this._particles) {\n        this._particles = [];\n        const particleCount = this._gridColCount * this._gridRowCount * this._options.particleCountFactor;\n        for (let i = 0; i < particleCount; i++) {\n          this._particles.push(this._getParticle());\n        }\n      }\n      this._evolve();\n      if (!this._batches) {\n        return;\n      }\n      // Fade existing particle trails.\n      context.save();\n      context.globalAlpha = this.getOpacity() || 0.75;\n      context.globalCompositeOperation = 'destination-out';\n      context.fillStyle = '#000';\n      context.fillRect(0, 0, this._canvas.width, this._canvas.height);\n      context.restore();\n      context.globalCompositeOperation = 'source-over';\n      context.lineWidth = this._options.lineWidth;\n      const extent = this._getExtent();\n      const gridSize = this._gridSize;\n      let [particle] = [{}];\n      for (let i = 0; i < this._batches.length; i++) {\n        const batch = this._batches[i];\n        context.beginPath();\n        context.strokeStyle = this._options.colors[i];\n        for (let j = 0; j < batch.length; j++) {\n          particle = batch[j] || {};\n          const x = extent[0] + gridSize * particle.x;\n          const y = extent[1] + gridSize * particle.y;\n          const xt = extent[0] + gridSize * particle.xt;\n          const yt = extent[1] + gridSize * particle.yt;\n          if (extent && (x < extent[0] || x > extent[2])) {\n            continue;\n          }\n          let pixel = map.getPixelFromCoordinate([x, y]);\n          context.moveTo(pixel[0], pixel[1]);\n          pixel = map.getPixelFromCoordinate([xt, yt]);\n          context.lineTo(pixel[0], pixel[1]);\n          particle.x = particle.xt;\n          particle.y = particle.yt;\n        }\n        context.stroke();\n      }\n    }\n  }\n\n  /**\n   * get particle\n   * @param age\n   */\n  _getParticle (age) {\n    return {\n      x: Math.round(Math.random() * this._gridColCount),\n      y: Math.round(Math.random() * this._gridRowCount),\n      age: age === undefined ? Math.floor(Math.random() * this._options.maxParticleAge) : age\n    }\n  }\n\n  /**\n   * get field\n   * @param x\n   * @param y\n   * @returns {*}\n   * @private\n   */\n  _getField (x, y) {\n    if (!this._grid) return NULL_WIND_VECTOR;\n    const rows = this._grid[Math.round(y)];\n    /* eslint-disable-next-line */\n    return (rows && rows[Math.round(x)] || NULL_WIND_VECTOR);\n  }\n\n  /**\n   * evolve\n   * @private\n   */\n  _evolve () {\n    const particles = this._particles;\n    if (!particles) {\n      return;\n    }\n    const batches = this._options.colors.map(function () {\n      return [];\n    });\n    const fieldScale = this._options.fieldFactor / this._options.fieldMaxIntensity;\n    let particle;\n    for (let i = 0; i < particles.length; i++) {\n      particle = particles[i];\n      if (particle.age > this._options.maxParticleAge) {\n        particle = this._getParticle(0);\n      }\n      let [x, y] = [particle.x, particle.y];\n      let v = this._getField(x, y);\n      if (!v[2]) {\n        particle = this._getParticle(0);\n      } else if (this._getField(x, y)[0] !== null) {\n        particle.xt = x + v[0] * fieldScale;\n        particle.yt = y + v[1] * fieldScale;\n        batches[this._colorIndex(v[2])].push(particle);\n      } else {\n        particle.x = x + v[0] * fieldScale;\n        particle.y = y + v[1] * fieldScale;\n      }\n      particle.age++;\n    }\n    this._batches = batches;\n  }\n\n  /**\n   * get inter polate\n   * @param x\n   * @param y\n   * @param searchExtent\n   * @returns {*}\n   * @private\n   */\n  _interpolate (x, y, searchExtent) {\n    const searches = this.data;\n    let [Σux, Σvx, Σweight] = [0, 0, 0];\n    var dx, dy, dd, weight;\n    var dataPoint, u, v;\n    for (let i = 0, iLen = Math.min(this._options.interpolateCount, searches.length); i < iLen; i++) {\n      dataPoint = searches[i];\n      dx = dataPoint.x - x;\n      dy = dataPoint.y - y;\n      if (dx === 0 && dy === 0) {\n        u = dataPoint.u;\n        v = dataPoint.v;\n        return [u, v, Math.sqrt(u * u + v * v)];\n      }\n      dd = dx * dx + dy * dy;\n      weight = Math.sqrt(1 / dd);\n      Σux += dataPoint.u * weight;\n      Σvx += dataPoint.v * weight;\n      Σweight += weight;\n    }\n    if (Σweight > 0) {\n      u = Σux / Σweight;\n      v = Σvx / Σweight;\n      return [u, v, Math.sqrt(u * u + v * v)];\n    }\n    return NULL_WIND_VECTOR;\n  }\n\n  /**\n   * get color index\n   * @param m\n   * @returns {number}\n   * @private\n   */\n  _colorIndex (m) {\n    const fieldMaxIntensity = this._options.fieldMaxIntensity;\n    return Math.floor(Math.min(m, fieldMaxIntensity) / fieldMaxIntensity * (this._options.colors.length - 1));\n  }\n}\n\nexport default WindyLayer\n"],"names":["Object","assign","defineProperty","target","varArgs","TypeError","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","isMobile","test","navigator","userAgent","createCanvas","width","height","Canvas","document","canvas","createElement","bind","fn","context","args","Array","slice","apply","window","requestAnimFrame","immediate","element","f","request","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","getCancelAnimFrame","prefixs","func","cancelAnimationFrame","i","len","cancelAnimFrame","id","cancel","clearTimeout","_options","NULL_WIND_VECTOR","NaN","WindyLayer","data","options","_canvas","setData","_grid","_dirty","_batches","_playing","_animationLoop","isClear","setSource","ol","source","ImageCanvas","logo","state","attributions","resolutions","canvasFunction","projection","ratio","on","redraw","getData","_map","getMap","us","vs","header","nx","ny","cols","rows","_projection","get","j","lat","Math","abs","lon","point","proj","transform","idx","u","v","addDataPoint","x","y","uid","value","feature","extent","push","render","_getExtent","start","_extent","setExtent","buildGrid","map","_size","getSize","dim","max","gridDivs","min","gridPixels","gridMaxDivs","gridReduceFactor","gridSize","_gridSize","count","divCount","sqrt","expand","_gridColCount","ceil","_gridRowCount","grid","row","_interpolate","_count","searchSteps","_expand","resolution","pixelRatio","size","getContext","_getMapSize","_view","getView","calculateExtent","appendTo","Map","set","addLayer","Error","clearWind","_cloneLayer","removeLayer","changed","renderSync","un","setMap","that","then","Date","now","frame","delta","frameRate","_evolve","_draw","stop","clear","forbidRedraw","particles","_clearContext","update","clearRect","_particles","particleCount","particleCountFactor","_getParticle","save","globalAlpha","getOpacity","globalCompositeOperation","fillStyle","fillRect","restore","lineWidth","particle","batch","beginPath","strokeStyle","colors","xt","yt","pixel","getPixelFromCoordinate","moveTo","lineTo","stroke","age","round","random","undefined","floor","maxParticleAge","_getField","batches","fieldScale","fieldFactor","fieldMaxIntensity","_colorIndex","searchExtent","searches","Σux","Σvx","Σweight","dx","dy","dd","weight","dataPoint","iLen","interpolateCount","m","layer","Image"],"mappings":"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"}